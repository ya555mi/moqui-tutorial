<?xml version="1.0" encoding="UTF-8"?>

<services xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
          xsi:noNamespaceSchemaLocation="http://moqui.org/xsd/service-definition-2.1.xsd">

    <!-- Order & Related Services -->
    <service verb="get" noun="FemalePersons" displayName="get the female person details">
        <out-parameters>
            <parameter name="personList" type="list" required="true"/>
        </out-parameters>
        <actions>
            <entity-find entity-name="mantle.party.Person" list="personList">
                <econdition field-name="gender" value="F"/>
            </entity-find>
        </actions>
    </service>

    <service verb="get" noun="Persons" displayName="get the person details">
        <out-parameters>
            <parameter name="personList" type="list" required="true"/>
        </out-parameters>
        <actions>
            <entity-find entity-name="mantle.party.Person" list="personList">
                <econdition field-name="maritalStatusEnumId" value="MarsMarried"/>
            </entity-find>
        </actions>
    </service>

    <service verb="get" noun="LatestOrders" displayName="get the Latest order">
        <out-parameters>
            <parameter name="ordersList" type="list" required="true"/>
        </out-parameters>
        <actions>
            <entity-find entity-name="mantle.order.OrderHeader" list="ordersList">
                <order-by field-name="- placedDate"/>
            </entity-find>
        </actions>
    </service>

    <service verb="get" noun="Order" displayName="get the person details">
        <in-parameters>
            <parameter name="orderId" required="true"/>
        </in-parameters>
        <out-parameters>
            <parameter name="ordersList" type="list" required="true"/>
        </out-parameters>
        <actions>
            <entity-find-one entity-name="mantle.order.OrderHeader" value-field="ordersList">
                <field-map field-name="orderId"/>
            </entity-find-one>
        </actions>
    </service>

    <service verb="get" noun="OrderHeaders" displayName="get the grand_total details">
        <out-parameters>
            <parameter name="ordersList" type="list" required="true"/>
        </out-parameters>
        <actions>
            <entity-find entity-name="mantle.order.OrderHeader" list="ordersList">
                <having-econditions>
                    <econdition field-name="grandTotal" operator="greater" from="50"/>
                </having-econditions>
            </entity-find>
        </actions>
    </service>

    <service verb="get" noun="OrderItems" displayName="get the grand_total details">
        <out-parameters>
            <parameter name="orderItemList" type="list" required="true"/>
        </out-parameters>
        <actions>
            <entity-find entity-name="mantle.order.OrderItem" list="orderItemList">
                <econdition field-name="orderId" value="100102"/>
                <econdition field-name="orderPartSeqId" value="01"/>
            </entity-find>
        </actions>
    </service>

    <service verb="get" noun="OrderParts" displayName="get the part_total details">
        <out-parameters>
            <parameter name="ordersPartList" type="list" required="true"/>
        </out-parameters>
        <actions>
            <entity-find entity-name="mantle.order.OrderPart" list="ordersPartList">
                <having-econditions>
                    <econdition field-name="partTotal" operator="less" from="20"/>
                </having-econditions>
            </entity-find>
        </actions>
    </service>

    <service verb="get" noun="OrderPartData" displayName="get the order part details">
        <out-parameters>
            <parameter name="orderPartLists" type="list" required="true"/>
        </out-parameters>
        <actions>
            <entity-find entity-name="mantle.order.OrderPart" list="ordersPartList">
                <econdition field-name="facilityId" value="ZIRET_WH"/>
            </entity-find>
            <set field="orderPartLists" from="[orderId:ordersPartList.orderId
                        ,orderPartSeqId:ordersPartList.orderPartSeqId,partName:ordersPartList.partName
                        ,customerPartyId:ordersPartList.customerPartyId,facilityId:ordersPartList.facilityId]"/>
        </actions>
    </service>

    <service verb="get" noun="OrderPartsCount" displayName="get the order part count details">
        <out-parameters>
            <parameter name="orderPartSeqId" type="list" required="true"/>
        </out-parameters>
        <actions>
            <entity-find-count entity-name="mantle.order.OrderPart" count-field="orderPartSeqId">
                <econdition field-name="customerPartyId" value="CustJqp"/>
            </entity-find-count>
        </actions>
    </service>

    <service verb="get" noun="OrderPartsInfo" displayName="get the order part details">
        <out-parameters>
            <parameter name="orderPartList" type="list" required="true"/>
        </out-parameters>
        <actions>
            <entity-find entity-name="mantle.order.OrderPart" distinct="true" list="orderPartList">
                <econdition field-name="shipmentMethodEnumId" value="ShtMthGround"/>
                <econdition field-name="facilityId" value="ZIRET_WH"/>
            </entity-find>
        </actions>
    </service>

</services>
